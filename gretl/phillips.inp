set verbose off
set workdir ./build

open ../data/phillips.csv

ldiff defl
infl = 100 * ld_defl

paroc = hpfilt(paro, 6.25)

diff infl
diff paroc

series covid = obs == obsnum(2020)

smpl 1965 2023

gnuplot infl --time-series --with-lines --output=phillips-infl.pdf
outfile phillips-adf-infl.txt
  adf 3 infl --c --test-down=AIC
end outfile

gnuplot d_infl --time-series --with-lines --output=phillips-d_infl.pdf
outfile phillips-adf-d_infl.txt
  adf 3 infl --c --difference --test-down=AIC
end outfile

gnuplot paro --time-series --with-lines --output=phillips-paro.pdf
outfile phillips-adf-paro.txt
  adf 3 paro --c --test-down=AIC
end outfile

gnuplot paroc --time-series --with-lines --output=phillips-paroc.pdf
outfile phillips-adf-paroc.txt
  adf 3 paroc --c --test-down=AIC
end outfile

outfile phillips-static.txt
  ols infl 0 covid paro --robust
end outfile

outfile phillips-lags.txt
  ols d_infl 0 covid paroc(0 to -3) --quiet
  printf "Lags = 3. BIC = %3g\n", $bic
  ols d_infl 0 covid paroc(0 to -2) --quiet
  printf "Lags = 2. BIC = %3g\n", $bic
  ols d_infl 0 covid paroc(0 to -1) --quiet
  printf "Lags = 1. BIC = %3g\n", $bic
  ols d_infl 0 covid paroc  --quiet
  printf "Lags = 0. BIC = %3g\n", $bic
end outfile

outfile phillips-dyn.txt
  ols d_infl 0 covid paroc(0 to -1) --robust
end outfile

outfile phillips-lr-mult.txt
  ols d_infl 0 covid d_paroc paroc(-1) --robust
end outfile

outfile phillips-lr-mult-0.txt
  ols d_infl 0 covid d_paroc --robust
end outfile
